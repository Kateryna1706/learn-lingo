{"version":3,"file":"static/js/455.c1b95035.chunk.js","mappings":"kNA+FA,UAvFiB,SAAC,GAAsB,IAApBA,EAAmB,EAAnBA,aACZC,GAASC,EAAAA,EAAAA,YAAWC,EAAAA,GAC1B,GAAwCC,EAAAA,EAAAA,UAAS,IAAjD,eAAOC,EAAP,KAAqBC,EAArB,KAEA,GAAwBF,EAAAA,EAAAA,UAAS,GAAjC,eAAOG,EAAP,KAAaC,EAAb,KACA,GAA0BJ,EAAAA,EAAAA,UAAS,GAAnC,eAAOK,EAAP,KAAcC,EAAd,KACA,GAAgCN,EAAAA,EAAAA,WAAS,GAAzC,eAAOO,EAAP,KAAiBC,EAAjB,KAmEA,OA7CAC,EAAAA,EAAAA,YAAU,WACHZ,IAEDA,EAAOa,aACTC,EAAAA,EAAAA,KAAQC,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,aAAa,SAAAC,GACjC,IAAIC,EAEFA,EADoB,mBAAlBlB,EAAOA,OACFiB,EACJE,MACAnB,QAAO,SAAAoB,GAAI,OAAIA,EAAKpB,EAAOA,SAAWA,EAAOqB,KAAlC,IAEPJ,EACJE,MACAnB,QAAO,SAAAoB,GAAI,OAAIA,EAAKpB,EAAOA,QAAQsB,SAAStB,EAAOqB,MAAxC,IAGhBhB,EAAgBa,EACjB,IAEqB,mBAAlBlB,EAAOA,OACTK,GAAgB,SAAAkB,GAAS,OACvBA,EAAUvB,QAAO,SAAAoB,GAAI,OAAIA,EAAKpB,EAAOA,SAAWA,EAAOqB,KAAlC,GADE,IAIzBhB,GAAgB,SAAAkB,GAAS,OACvBA,EAAUvB,QAAO,SAAAoB,GAAI,OAAIA,EAAKpB,EAAOA,QAAQsB,SAAStB,EAAOqB,MAAxC,GADE,IAK9B,GAAE,CAACrB,KAEJY,EAAAA,EAAAA,YAAU,WACR,IAAMY,GAAQT,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,YAEtBS,GAAWC,EAAAA,EAAAA,IAAMF,GAAOG,EAAAA,EAAAA,GAAW,OAAOC,EAAAA,EAAAA,IAAU,GAAD,OAAIpB,MAE7DM,EAAAA,EAAAA,IAAQW,GAAU,SAAAR,GAChB,IAAMC,EAAOD,EAASE,MAEtBd,EAAgBa,GAChBP,EAAYL,EAAOuB,KAAKC,KAAK,KAC9B,GACF,GAAE,CAACtB,EAAOF,KAIT,SAAC,IAAD,WACE,UAAC,IAAD,YACE,SAAC,IAAD,CAAQP,aAAcA,EAAcgC,WA/DvB,WACjB,IAAMP,GAAQT,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,YAEtBS,GAAWC,EAAAA,EAAAA,IAAMF,GAAOG,EAAAA,EAAAA,GAAW,OAAOC,EAAAA,EAAAA,IAAU,GAAD,OAAIpB,MAE7DM,EAAAA,EAAAA,IAAQW,GAAU,SAAAR,GAChB,IAAMC,EAAOD,EAASE,MAEtBd,EAAgBa,GAChBP,EAAYL,EAAOuB,KAAKC,KAAK,KAC9B,IACDvB,EAAQ,GACRE,EAAS,EACV,KAmDK,SAAC,IAAD,CACEC,SAAUA,EACVsB,SAvES,WACfzB,GAAQ,SAAAgB,GAAS,OAAIA,EAAY,CAAhB,IACjBd,GAAS,SAAAc,GAAS,OAAIA,EAAY,CAAhB,GACnB,EAqEOnB,aAAcA,QAKvB,C","sources":["pages/Teachers.jsx"],"sourcesContent":["import Filter from 'components/Filter/Filter';\nimport TeacherList from 'components/TeacherList/TeacherList';\nimport { Container, Wrapper } from './ListPage.styled';\nimport { useContext, useEffect, useState } from 'react';\nimport { FilterContex } from 'context';\nimport { ref, onValue, query, orderByKey, endBefore } from 'firebase/database';\nimport { database } from '../firebase-config';\n\nconst Teachers = ({ changeFilter }) => {\n  const filter = useContext(FilterContex);\n  const [teachersList, setTeachersList] = useState([]);\n\n  const [page, setPage] = useState(1);\n  const [limit, setLimit] = useState(4);\n  const [loadMore, setLoadMore] = useState(false);\n\n  const showMore = () => {\n    setPage(prevState => prevState + 1);\n    setLimit(prevState => prevState + 4);\n  };\n\n  const updateList = () => {\n    const dbRef = ref(database, 'teachers');\n\n    const queryRef = query(dbRef, orderByKey(`id`), endBefore(`${limit}`));\n\n    onValue(queryRef, snapshot => {\n      const list = snapshot.val();\n\n      setTeachersList(list);\n      setLoadMore(page < Math.ceil(30 / 4));\n    });\n    setPage(1);\n    setLimit(4);\n  };\n\n  useEffect(() => {\n    if (!filter) return;\n\n    if (filter.firstFilter) {\n      onValue(ref(database, 'teachers'), snapshot => {\n        let list;\n        if (filter.filter === 'price_per_hour') {\n          list = snapshot\n            .val()\n            .filter(item => item[filter.filter] <= filter.value);\n        } else {\n          list = snapshot\n            .val()\n            .filter(item => item[filter.filter].includes(filter.value));\n        }\n\n        setTeachersList(list);\n      });\n    } else {\n      if (filter.filter === 'price_per_hour') {\n        setTeachersList(prevState =>\n          prevState.filter(item => item[filter.filter] <= filter.value)\n        );\n      } else {\n        setTeachersList(prevState =>\n          prevState.filter(item => item[filter.filter].includes(filter.value))\n        );\n      }\n    }\n  }, [filter]);\n\n  useEffect(() => {\n    const dbRef = ref(database, 'teachers');\n\n    const queryRef = query(dbRef, orderByKey(`id`), endBefore(`${limit}`));\n\n    onValue(queryRef, snapshot => {\n      const list = snapshot.val();\n\n      setTeachersList(list);\n      setLoadMore(page < Math.ceil(30 / 4));\n    });\n  }, [limit, page]);\n\n\n  return (\n    <Container>\n      <Wrapper>\n        <Filter changeFilter={changeFilter} updateList={updateList} />\n        <TeacherList\n          loadMore={loadMore}\n          showMore={showMore}\n          teachersList={teachersList}\n        />\n      </Wrapper>\n    </Container>\n  );\n};\n\nexport default Teachers;\n"],"names":["changeFilter","filter","useContext","FilterContex","useState","teachersList","setTeachersList","page","setPage","limit","setLimit","loadMore","setLoadMore","useEffect","firstFilter","onValue","ref","database","snapshot","list","val","item","value","includes","prevState","dbRef","queryRef","query","orderByKey","endBefore","Math","ceil","updateList","showMore"],"sourceRoot":""}