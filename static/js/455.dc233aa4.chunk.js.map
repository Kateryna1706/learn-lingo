{"version":3,"file":"static/js/455.dc233aa4.chunk.js","mappings":"kNAQA,MAuFA,EAvFiBA,IAAuB,IAAtB,aAAEC,GAAcD,EAChC,MAAME,GAASC,EAAAA,EAAAA,YAAWC,EAAAA,IACnBC,EAAcC,IAAmBC,EAAAA,EAAAA,UAAS,KAE1CC,EAAMC,IAAWF,EAAAA,EAAAA,UAAS,IAC1BG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,IAC5BK,EAAUC,IAAeN,EAAAA,EAAAA,WAAS,GAmEzC,OA7CAO,EAAAA,EAAAA,YAAU,KACHZ,IAEDA,EAAOa,aACTC,EAAAA,EAAAA,KAAQC,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,aAAaC,IACjC,IAAIC,EAEFA,EADoB,mBAAlBlB,EAAOA,OACFiB,EACJE,MACAnB,QAAOoB,GAAQA,EAAKpB,EAAOA,SAAWA,EAAOqB,QAEzCJ,EACJE,MACAnB,QAAOoB,GAAQA,EAAKpB,EAAOA,QAAQsB,SAAStB,EAAOqB,SAGxDjB,EAAgBc,EAAK,IAGD,mBAAlBlB,EAAOA,OACTI,GAAgBmB,GACdA,EAAUvB,QAAOoB,GAAQA,EAAKpB,EAAOA,SAAWA,EAAOqB,UAGzDjB,GAAgBmB,GACdA,EAAUvB,QAAOoB,GAAQA,EAAKpB,EAAOA,QAAQsB,SAAStB,EAAOqB,WAGnE,GACC,CAACrB,KAEJY,EAAAA,EAAAA,YAAU,KACR,MAAMY,GAAQT,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,YAEtBS,GAAWC,EAAAA,EAAAA,IAAMF,GAAOG,EAAAA,EAAAA,GAAW,OAAOC,EAAAA,EAAAA,IAAU,GAADC,OAAIrB,MAE7DM,EAAAA,EAAAA,IAAQW,GAAUR,IAChB,MAAMC,EAAOD,EAASE,MAEtBf,EAAgBc,GAChBP,EAAYL,EAAOwB,KAAKC,KAAK,KAAQ,GACrC,GACD,CAACvB,EAAOF,KAIT0B,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CAAAC,UACRC,EAAAA,EAAAA,MAACC,EAAAA,EAAO,CAAAF,SAAA,EACNF,EAAAA,EAAAA,KAACK,EAAAA,EAAM,CAACtC,aAAcA,EAAcuC,WA/DvBA,KACjB,MAAMd,GAAQT,EAAAA,EAAAA,IAAIC,EAAAA,GAAU,YAEtBS,GAAWC,EAAAA,EAAAA,IAAMF,GAAOG,EAAAA,EAAAA,GAAW,OAAOC,EAAAA,EAAAA,IAAU,GAADC,OAAIrB,MAE7DM,EAAAA,EAAAA,IAAQW,GAAUR,IAChB,MAAMC,EAAOD,EAASE,MAEtBf,EAAgBc,GAChBP,EAAYL,EAAOwB,KAAKC,KAAK,KAAQ,IAEvCxB,EAAQ,GACRE,EAAS,EAAE,KAoDPuB,EAAAA,EAAAA,KAACO,EAAAA,EAAW,CACV7B,SAAUA,EACV8B,SAvESA,KACfjC,GAAQgB,GAAaA,EAAY,IACjCd,GAASc,GAAaA,EAAY,GAAE,EAsE9BpB,aAAcA,QAGR,C","sources":["pages/Teachers.jsx"],"sourcesContent":["import Filter from 'components/Filter/Filter';\nimport TeacherList from 'components/TeacherList/TeacherList';\nimport { Container, Wrapper } from './ListPage.styled';\nimport { useContext, useEffect, useState } from 'react';\nimport { FilterContex } from 'context';\nimport { ref, onValue, query, orderByKey, endBefore } from 'firebase/database';\nimport { database } from '../firebase-config';\n\nconst Teachers = ({ changeFilter }) => {\n  const filter = useContext(FilterContex);\n  const [teachersList, setTeachersList] = useState([]);\n\n  const [page, setPage] = useState(1);\n  const [limit, setLimit] = useState(4);\n  const [loadMore, setLoadMore] = useState(false);\n\n  const showMore = () => {\n    setPage(prevState => prevState + 1);\n    setLimit(prevState => prevState + 4);\n  };\n\n  const updateList = () => {\n    const dbRef = ref(database, 'teachers');\n\n    const queryRef = query(dbRef, orderByKey(`id`), endBefore(`${limit}`));\n\n    onValue(queryRef, snapshot => {\n      const list = snapshot.val();\n\n      setTeachersList(list);\n      setLoadMore(page < Math.ceil(30 / 4));\n    });\n    setPage(1);\n    setLimit(4);\n  };\n\n  useEffect(() => {\n    if (!filter) return;\n\n    if (filter.firstFilter) {\n      onValue(ref(database, 'teachers'), snapshot => {\n        let list;\n        if (filter.filter === 'price_per_hour') {\n          list = snapshot\n            .val()\n            .filter(item => item[filter.filter] <= filter.value);\n        } else {\n          list = snapshot\n            .val()\n            .filter(item => item[filter.filter].includes(filter.value));\n        }\n\n        setTeachersList(list);\n      });\n    } else {\n      if (filter.filter === 'price_per_hour') {\n        setTeachersList(prevState =>\n          prevState.filter(item => item[filter.filter] <= filter.value)\n        );\n      } else {\n        setTeachersList(prevState =>\n          prevState.filter(item => item[filter.filter].includes(filter.value))\n        );\n      }\n    }\n  }, [filter]);\n\n  useEffect(() => {\n    const dbRef = ref(database, 'teachers');\n\n    const queryRef = query(dbRef, orderByKey(`id`), endBefore(`${limit}`));\n\n    onValue(queryRef, snapshot => {\n      const list = snapshot.val();\n\n      setTeachersList(list);\n      setLoadMore(page < Math.ceil(30 / 4));\n    });\n  }, [limit, page]);\n\n\n  return (\n    <Container>\n      <Wrapper>\n        <Filter changeFilter={changeFilter} updateList={updateList} />\n        <TeacherList\n          loadMore={loadMore}\n          showMore={showMore}\n          teachersList={teachersList}\n        />\n      </Wrapper>\n    </Container>\n  );\n};\n\nexport default Teachers;\n"],"names":["_ref","changeFilter","filter","useContext","FilterContex","teachersList","setTeachersList","useState","page","setPage","limit","setLimit","loadMore","setLoadMore","useEffect","firstFilter","onValue","ref","database","snapshot","list","val","item","value","includes","prevState","dbRef","queryRef","query","orderByKey","endBefore","concat","Math","ceil","_jsx","Container","children","_jsxs","Wrapper","Filter","updateList","TeacherList","showMore"],"sourceRoot":""}